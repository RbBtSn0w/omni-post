name: PR Size Check

# Automatically labels PRs based on their size (lines changed).
# Helps identify large PRs that may need to be split.

on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  pull-requests: write

jobs:
  size-label:
    name: Label PR Size
    runs-on: ubuntu-latest
    timeout-minutes: 5

    steps:
    - name: Label PR size
      uses: codelytv/pr-size-labeler@v1
      with:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        xs_label: 'size/XS'
        xs_max_size: 10
        s_label: 'size/S'
        s_max_size: 100
        m_label: 'size/M'
        m_max_size: 300
        l_label: 'size/L'
        l_max_size: 500
        xl_label: 'size/XL'
        fail_if_xl: false
        message_if_xl: |
          ⚠️ **This PR is quite large!**

          | Size | Lines Changed |
          |------|---------------|
          | XS | 0-10 |
          | S | 11-100 |
          | M | 101-300 |
          | L | 301-500 |
          | **XL** | **500+** ← You are here |

          Consider splitting this PR into smaller, focused changes for easier review.

          **Benefits of smaller PRs:**
          - Faster review cycles
          - Easier to understand changes
          - Lower risk of introducing bugs
          - Better git history
        github_api_url: 'https://api.github.com'
        files_to_ignore: |
          package-lock.json
          *.lock
          *.snap
